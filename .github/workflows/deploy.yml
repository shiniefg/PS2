name: ğŸš€ Deploy & Quality Assurance

on:
   push:
   branches:
   - main
workflow_dispatch:

   permission:
   contents: read
   pages: write
   id-token: write

concurrency:
   group: ${{ github.workflow }}-${{ github.ref }}
   cancel-in-progress: true

jobs:
   deploy:
      name: ğŸš€ Deploy to Github pages
      runs-on: ubuntu-latest
      if: github.ref == 'refs/heads/main'
      outputs:
         page_url: ${{ steps.deployment.outputs.pages_url }}
      environment:
         name: github-pages
         url: ${{ steps.deployment.outputs.page_url }} 

      steps:
         - name: ğŸ“¤ Checkout code
           uses: actions/checkout@v4

         - name: ğŸ“„ Setup Pages
           uses: actions/configure-pages@v4

         - name: ğŸ“¦ Upload artifact
           uses: actions/Upload-pages-artifact@v3
           with: 
             path: "."

         - name: ğŸš€ Deploy to Github pages
           id: deployment
           uses: actions/deploy-pages@v4